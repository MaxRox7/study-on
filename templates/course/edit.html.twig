{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('build/app.css') }}" rel="stylesheet">
    <link href="{{ asset('css/course-forms.css') }}" rel="stylesheet">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/course-forms.js') }}"></script>
{% endblock %}

{% block title %}Редактировать курс - {{ course.titleCourse }}{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="card shadow-lg">
        <div class="card-header bg-primary text-white">
            <h2 class="h4 mb-0">Редактирование: {{ course.titleCourse }}</h2>
        </div>
        
        <div class="card-body p-4">
            {{ form_start(form) }}
            
            <div class="mb-4">
                {{ form_label(form.titleCourse, 'Название курса', {
                    'label_attr': {'class': 'form-label fw-bold'}
                }) }}
                {{ form_widget(form.titleCourse, {
                    'attr': {
                        'class': 'form-control' ~ (form.titleCourse.vars.valid ? '' : ' is-invalid'),
                        'placeholder': 'Введите название курса'
                    }
                }) }}
                <div class="invalid-feedback">
                    {{ form_errors(form.titleCourse) }}
                </div>
            </div>

            <div class="mb-4">
                {{ form_label(form.symbolCode, 'Код курса', {
                    'label_attr': {'class': 'form-label fw-bold'}
                }) }}
                {{ form_widget(form.symbolCode, {
                    'attr': {
                        'class': 'form-control' ~ (form.symbolCode.vars.valid ? '' : ' is-invalid'),
                        'placeholder': 'Введите код курса'
                    }
                }) }}
                <div class="invalid-feedback">
                    {{ form_errors(form.symbolCode) }}
                </div>
            </div>

            <div class="mb-4">
                {{ form_label(form.description, 'Описание', {
                    'label_attr': {'class': 'form-label fw-bold'}
                }) }}
                {{ form_widget(form.description, {
                    'attr': {
                        'class': 'form-control' ~ (form.description.vars.valid ? '' : ' is-invalid'),
                        'rows': 8,
                        'placeholder': 'Добавьте описание курса'
                    }
                }) }}
                <div class="invalid-feedback">
                    {{ form_errors(form.description) }}
                </div>
            </div>

            <div class="mb-4">
                {{ form_label(form.courseType, 'Тип курса', {
                    'label_attr': {'class': 'form-label fw-bold'}
                }) }}
                {{ form_widget(form.courseType, {
                    'attr': {
                        'class': 'form-control' ~ (form.courseType.vars.valid ? '' : ' is-invalid')
                    }
                }) }}
                <div class="invalid-feedback">
                    {{ form_errors(form.courseType) }}
                </div>
            </div>

            <div class="mb-4" id="price_field" style="display: none;">
                {{ form_label(form.coursePrice, 'Стоимость курса', {
                    'label_attr': {'class': 'form-label fw-bold'}
                }) }}
                {{ form_widget(form.coursePrice, {
                    'attr': {
                        'class': 'form-control' ~ (form.coursePrice.vars.valid ? '' : ' is-invalid'),
                        'placeholder': 'Введите стоимость курса'
                    }
                }) }}
                <div class="invalid-feedback">
                    {{ form_errors(form.coursePrice) }}
                </div>
                <div class="form-text">Поле обязательно для курсов типа "Аренда" и "Покупка"</div>
            </div>

            {% for message in app.flashes('error') %}
                <div class="alert alert-danger">
                    {{ message }}
                </div>
            {% endfor %}

            {% for message in app.flashes('success') %}
                <div class="alert alert-success">
                    {{ message }}
                </div>
            {% endfor %}

            <div class="d-flex justify-content-between mt-5">
                <a href="{{ path('course_show', {'idCourse': course.idCourse}) }}" 
                   class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Назад к курсу
                </a>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-save"></i> Сохранить изменения
                </button>
            </div>

            {{ form_end(form) }}
        </div>
    </div>
</div>


{% endblock %}